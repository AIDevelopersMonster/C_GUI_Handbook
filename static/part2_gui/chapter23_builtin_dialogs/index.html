<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11. Глава 23: Предустановленные Диалоги (GtkFileChooserDialog, GtkColorChooserDialog) &mdash; документация C &amp; GUI на RPi Zero 2 W 1.0</title>
      <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  
        <script data-url_root="../../" id="documentation_options" src="../../static/documentation_options.js"></script>
        <script src="../../static/jquery.js"></script>
        <script src="../../static/underscore.js"></script>
        <script src="../../static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../static/doctools.js"></script>
        <script src="../../static/sphinx_highlight.js"></script>
        <script src="../../static/translations.js"></script>
    <script src="../../static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../../genindex.html" />
    <link rel="search" title="Поиск" href="../../search.html" />
    <link rel="next" title="12. Глава 24: Настройка виджетов" href="../chapter24_widget_customization/index.html" />
    <link rel="prev" title="10. Глава 22: Диалоговые Окна и Окна Сообщений" href="../chapter22_dialogs/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            C & GUI на RPi Zero 2 W
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../part1_basics/index.html">Часть I: Основы языка Си</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Часть II: Разработка GUI с помощью GTK</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../chapter13_gtk_intro/index.html">1. Глава 13: Введение в GTK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter14_first_project/index.html">2. Глава 14: Первый GTK-проект — Окно с кнопкой</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter15_buttons/index.html">3. Глава 15: Кнопки и обработка событий</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter16_labels_layout/index.html">4. Глава 16: Метки и Базовые Контейнеры Компоновки (GtkBox)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter17_grid_layout/index.html">5. Глава 17: Гибкая Компоновка с GtkGrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter18_inputs/index.html">6. Глава 18: Элементы Пользовательского Ввода</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter19_comboboxes/index.html">7. Глава 19: Выпадающие Списки (ComboBox) и Модели Данных (ListStore)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter20_treeview/index.html">8. Глава 20: Деревья и Таблицы (GtkTreeView)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter21_menus/index.html">9. Глава 21: Меню Приложений (GtkMenuBar, GtkMenu, GtkMenuItem)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter22_dialogs/index.html">10. Глава 22: Диалоговые Окна и Окна Сообщений</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11. Глава 23: Предустановленные Диалоги (GtkFileChooserDialog, GtkColorChooserDialog)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">11.1. Компиляция и Запуск Примеров</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">11.2. Ожидаемый Результат</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">11.3. Дополнительные Ресурсы</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../chapter24_widget_customization/index.html">12. Глава 24: Настройка виджетов</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chapter25_glade/index.html">13. Глава 25: Glade – визуальный редактор интерфейсов</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../part3_projects/index.html">Часть III: Приложения и справка</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">C & GUI на RPi Zero 2 W</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Часть II: Разработка GUI с помощью GTK</a></li>
      <li class="breadcrumb-item active"><span class="section-number">11. </span>Глава 23: Предустановленные Диалоги (GtkFileChooserDialog, GtkColorChooserDialog)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../sources/part2_gui/chapter23_builtin_dialogs/index.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gtkfilechooserdialog-gtkcolorchooserdialog">
<h1><span class="section-number">11. </span>Глава 23: Предустановленные Диалоги (GtkFileChooserDialog, GtkColorChooserDialog)<a class="headerlink" href="#gtkfilechooserdialog-gtkcolorchooserdialog" title="Permalink to this heading"></a></h1>
<p>В этой главе мы сосредоточимся на использовании <strong>предустановленных диалоговых окон</strong> в GTK. Эти диалоги «из коробки» предоставляют стандартный и знакомый пользователям функционал, такой как выбор файлов или настройка цветов, избавляя разработчика от необходимости создавать сложный интерфейс с нуля.</p>
<p>Мы рассмотрим:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/class.FileChooserDialog.html">GtkFileChooserDialog</a>: Диалог для выбора одного или нескольких файлов, а также для выбора папки или сохранения файла.</p></li>
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/class.ColorChooserDialog.html">GtkColorChooserDialog</a>: Диалог для выбора цвета из палитры или по RGB/HEX значениям.</p></li>
</ul>
<p>Это важный функционал, позволяющий пользователю безопасно и интуитивно взаимодействовать с файловой системой и настраивать визуальные параметры приложения. GTK предоставляет мощный API для вызова этих диалогов без необходимости вручную создавать их интерфейс.</p>
<p>—</p>
<p>### Основные понятия и функции</p>
<p><strong>gtk_file_chooser_dialog_new()</strong>: Создаёт новый GtkFileChooserDialog.</p>
<p>G**TK_FILE_CHOOSER_ACTION_OPEN**: Режим GtkFileChooserDialog для открытия существующих файлов.</p>
<p><strong>GTK_FILE_CHOOSER_ACTION_SAVE</strong>: Режим GtkFileChooserDialog для сохранения файлов.</p>
<p><strong>GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER</strong>: Режим GtkFileChooserDialog для выбора папки.</p>
<p><strong>gtk_file_chooser_get_filename()</strong>: Получает путь к выбранному файлу/папке после закрытия диалога.</p>
<p><strong>gtk_file_chooser_get_uri()</strong>: Получает URI к выбранному файлу/папке (может быть удобнее для кросс-платформенности).</p>
<p><strong>gtk_color_chooser_dialog_new()</strong>: Создаёт новый GtkColorChooserDialog.</p>
<p><strong>gtk_color_chooser_set_rgba()</strong>: Устанавливает текущий цвет в GtkColorChooserDialog.</p>
<p><strong>gtk_color_chooser_get_rgba()</strong>: Получает выбранный цвет из GtkColorChooserDialog.</p>
<p><strong>gtk_dialog_run()</strong>: Отображает диалог и ожидает действия пользователя, возвращая GtkResponseType.</p>
<p><strong>gtk_widget_destroy()</strong>: Уничтожает виджет, освобождая ресурсы. Важно для диалогов после их использования.</p>
<p><strong>GTK_RESPONSE_ACCEPT</strong>: Стандартный ответ диалога, означающий «OK», «Открыть», «Сохранить».</p>
<p><strong>GTK_RESPONSE_CANCEL</strong>: Стандартный ответ диалога, означающий «Отмена».</p>
<p>—</p>
<p>### Пример 23.1: Диалог Открытия Файла (GtkFileChooserDialog)</p>
<p><strong>Файл:</strong> <cite>file_chooser_open_example.c</cite></p>
<p>Этот пример демонстрирует, как использовать <cite>GtkFileChooserDialog</cite> для выбора файла. Основное окно будет содержать кнопку, нажатие которой вызовет стандартное системное диалоговое окно для открытия файла. После выбора файла его путь будет напечатан в консоль.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtk/gtk.h&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Callback-функция, вызываемая при нажатии кнопки &quot;Открыть файл&quot;.</span>
<span class="cm"> * Открывает GtkFileChooserDialog для выбора файла.</span>
<span class="cm"> *</span>
<span class="cm"> * @param widget Указатель на кнопку.</span>
<span class="cm"> * @param window Указатель на родительское окно.</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">on_open_button_clicked</span><span class="p">(</span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">widget</span><span class="p">,</span><span class="w"> </span><span class="n">gpointer</span><span class="w"> </span><span class="n">window</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">dialog</span><span class="p">;</span><span class="w"> </span><span class="c1">// Указатель на файловый диалог.</span>
<span class="w">    </span><span class="n">gint</span><span class="w"> </span><span class="n">res</span><span class="p">;</span><span class="w">          </span><span class="c1">// Результат закрытия диалога.</span>

<span class="w">    </span><span class="c1">// Создаем новый GtkFileChooserDialog для открытия файла.</span>
<span class="w">    </span><span class="c1">// Параметры:</span>
<span class="w">    </span><span class="c1">// 1. &quot;Открыть файл&quot;: Заголовок диалогового окна.</span>
<span class="w">    </span><span class="c1">// 2. GTK_WINDOW(window): Родительское окно для диалога.</span>
<span class="w">    </span><span class="c1">// 3. GTK_FILE_CHOOSER_ACTION_OPEN: Режим работы диалога - открытие существующего файла.</span>
<span class="w">    </span><span class="c1">// 4. &quot;_Отмена&quot;: Текст кнопки отмены и ее GTK_RESPONSE_CANCEL.</span>
<span class="w">    </span><span class="c1">// 5. &quot;_Открыть&quot;: Текст кнопки подтверждения и ее GTK_RESPONSE_ACCEPT.</span>
<span class="w">    </span><span class="c1">// 6. NULL: Завершает список кнопок.</span>
<span class="w">    </span><span class="n">dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_file_chooser_dialog_new</span><span class="p">(</span><span class="s">&quot;Открыть файл&quot;</span><span class="p">,</span>
<span class="w">                                         </span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span>
<span class="w">                                         </span><span class="n">GTK_FILE_CHOOSER_ACTION_OPEN</span><span class="p">,</span>
<span class="w">                                         </span><span class="s">&quot;_Отмена&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GTK_RESPONSE_CANCEL</span><span class="p">,</span>
<span class="w">                                         </span><span class="s">&quot;_Открыть&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GTK_RESPONSE_ACCEPT</span><span class="p">,</span>
<span class="w">                                         </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Запускаем диалог и получаем его результат.</span>
<span class="w">    </span><span class="c1">// gtk_dialog_run() блокирует выполнение до выбора пользователя.</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_dialog_run</span><span class="p">(</span><span class="n">GTK_DIALOG</span><span class="p">(</span><span class="n">dialog</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// Проверяем, нажал ли пользователь &quot;Открыть&quot;.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GTK_RESPONSE_ACCEPT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">;</span><span class="w"> </span><span class="c1">// Переменная для хранения пути к файлу.</span>
<span class="w">        </span><span class="n">GtkFileChooser</span><span class="w"> </span><span class="o">*</span><span class="n">chooser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GTK_FILE_CHOOSER</span><span class="p">(</span><span class="n">dialog</span><span class="p">);</span><span class="w"> </span><span class="c1">// Приводим к типу GtkFileChooser.</span>

<span class="w">        </span><span class="c1">// Получаем выбранный путь к файлу.</span>
<span class="w">        </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_file_chooser_get_filename</span><span class="p">(</span><span class="n">chooser</span><span class="p">);</span>
<span class="w">        </span><span class="n">g_print</span><span class="p">(</span><span class="s">&quot;Выбран файл: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span><span class="w"> </span><span class="c1">// Выводим путь в консоль.</span>
<span class="w">        </span><span class="n">g_free</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span><span class="w"> </span><span class="c1">// Освобождаем память, выделенную для строки filename.</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Уничтожаем диалог после его использования, независимо от результата.</span>
<span class="w">    </span><span class="n">gtk_widget_destroy</span><span class="p">(</span><span class="n">dialog</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Главная функция программы.</span>
<span class="cm"> * Создает основное окно с кнопкой для вызова диалога открытия файла.</span>
<span class="cm"> *</span>
<span class="cm"> * @param argc Аргументы командной строки.</span>
<span class="cm"> * @param argv Аргументы командной строки.</span>
<span class="cm"> * @return Код завершения программы.</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">vbox</span><span class="p">;</span><span class="w"> </span><span class="c1">// Добавим vbox для лучшего расположения</span>

<span class="w">    </span><span class="n">gtk_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>

<span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_window_new</span><span class="p">(</span><span class="n">GTK_WINDOW_TOPLEVEL</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_title</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Выбор файла&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_default_size</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_position</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">GTK_WIN_POS_CENTER</span><span class="p">);</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;destroy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">gtk_main_quit</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">vbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_box_new</span><span class="p">(</span><span class="n">GTK_ORIENTATION_VERTICAL</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// Отступ 10 пикселей</span>
<span class="w">    </span><span class="n">gtk_container_set_border_width</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// Отступ от краев</span>
<span class="w">    </span><span class="n">gtk_container_add</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">vbox</span><span class="p">);</span>

<span class="w">    </span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_button_new_with_label</span><span class="p">(</span><span class="s">&quot;Открыть файл...&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Передаем window как пользовательские данные, чтобы использовать его как родителя.</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clicked&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">on_open_button_clicked</span><span class="p">),</span><span class="w"> </span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_box_pack_start</span><span class="p">(</span><span class="n">GTK_BOX</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="n">gtk_widget_show_all</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_main</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>—</p>
<p>### Пример 23.2: Диалог Сохранения Файла (GtkFileChooserDialog)</p>
<p><strong>Файл:</strong> <cite>file_chooser_save_example.c</cite></p>
<p>Этот пример показывает, как использовать <cite>GtkFileChooserDialog</cite> для сохранения файла. Диалог будет предназначаться для выбора места и имени нового файла для сохранения.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtk/gtk.h&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Callback-функция, вызываемая при нажатии кнопки &quot;Сохранить файл&quot;.</span>
<span class="cm"> * Открывает GtkFileChooserDialog для сохранения файла.</span>
<span class="cm"> *</span>
<span class="cm"> * @param widget Указатель на кнопку.</span>
<span class="cm"> * @param window Указатель на родительское окно.</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">on_save_button_clicked</span><span class="p">(</span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">widget</span><span class="p">,</span><span class="w"> </span><span class="n">gpointer</span><span class="w"> </span><span class="n">window</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">dialog</span><span class="p">;</span>
<span class="w">    </span><span class="n">gint</span><span class="w"> </span><span class="n">res</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Создаем GtkFileChooserDialog в режиме сохранения файла.</span>
<span class="w">    </span><span class="c1">// GTK_FILE_CHOOSER_ACTION_SAVE указывает на режим сохранения.</span>
<span class="w">    </span><span class="n">dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_file_chooser_dialog_new</span><span class="p">(</span><span class="s">&quot;Сохранить файл&quot;</span><span class="p">,</span>
<span class="w">                                         </span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span>
<span class="w">                                         </span><span class="n">GTK_FILE_CHOOSER_ACTION_SAVE</span><span class="p">,</span>
<span class="w">                                         </span><span class="s">&quot;_Отмена&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GTK_RESPONSE_CANCEL</span><span class="p">,</span>
<span class="w">                                         </span><span class="s">&quot;_Сохранить&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GTK_RESPONSE_ACCEPT</span><span class="p">,</span>
<span class="w">                                         </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Устанавливаем рекомендованное имя файла по умолчанию.</span>
<span class="w">    </span><span class="c1">// Пользователь может изменить его.</span>
<span class="w">    </span><span class="n">gtk_file_chooser_set_current_name</span><span class="p">(</span><span class="n">GTK_FILE_CHOOSER</span><span class="p">(</span><span class="n">dialog</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;НовыйДокумент.txt&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Устанавливаем режим подтверждения перезаписи.</span>
<span class="w">    </span><span class="c1">// GTK_FILE_CHOOSER_CONFIRMATION_CONFIRM: если файл существует, спросить пользователя.</span>
<span class="w">    </span><span class="c1">// GTK_FILE_CHOOSER_CONFIRMATION_ACCEPT: всегда принимать.</span>
<span class="w">    </span><span class="c1">// GTK_FILE_CHOOSER_CONFIRMATION_SELECT_IF_EXISTS: выбрать, если существует.</span>
<span class="w">    </span><span class="n">gtk_file_chooser_set_do_overwrite_confirmation</span><span class="p">(</span><span class="n">GTK_FILE_CHOOSER</span><span class="p">(</span><span class="n">dialog</span><span class="p">),</span><span class="w"> </span><span class="n">TRUE</span><span class="p">);</span>

<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_dialog_run</span><span class="p">(</span><span class="n">GTK_DIALOG</span><span class="p">(</span><span class="n">dialog</span><span class="p">));</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GTK_RESPONSE_ACCEPT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">GtkFileChooser</span><span class="w"> </span><span class="o">*</span><span class="n">chooser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GTK_FILE_CHOOSER</span><span class="p">(</span><span class="n">dialog</span><span class="p">);</span>
<span class="w">        </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_file_chooser_get_filename</span><span class="p">(</span><span class="n">chooser</span><span class="p">);</span>
<span class="w">        </span><span class="n">g_print</span><span class="p">(</span><span class="s">&quot;Файл будет сохранен как: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Здесь должна быть логика сохранения файла по полученному пути</span>
<span class="w">        </span><span class="n">g_free</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">gtk_widget_destroy</span><span class="p">(</span><span class="n">dialog</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Главная функция программы.</span>
<span class="cm"> * Создает основное окно с кнопкой для вызова диалога сохранения файла.</span>
<span class="cm"> *</span>
<span class="cm"> * @param argc Аргументы командной строки.</span>
<span class="cm"> * @param argv Аргументы командной строки.</span>
<span class="cm"> * @return Код завершения программы.</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">vbox</span><span class="p">;</span>

<span class="w">    </span><span class="n">gtk_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>

<span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_window_new</span><span class="p">(</span><span class="n">GTK_WINDOW_TOPLEVEL</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_title</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Сохранение файла&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_default_size</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_position</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">GTK_WIN_POS_CENTER</span><span class="p">);</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;destroy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">gtk_main_quit</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">vbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_box_new</span><span class="p">(</span><span class="n">GTK_ORIENTATION_VERTICAL</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_container_set_border_width</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_container_add</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">vbox</span><span class="p">);</span>

<span class="w">    </span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_button_new_with_label</span><span class="p">(</span><span class="s">&quot;Сохранить файл...&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clicked&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">on_save_button_clicked</span><span class="p">),</span><span class="w"> </span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_box_pack_start</span><span class="p">(</span><span class="n">GTK_BOX</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="n">gtk_widget_show_all</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_main</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>—</p>
<p>### Пример 23.3: Диалог Выбора Цвета (GtkColorChooserDialog)</p>
<p><strong>Файл:</strong> <cite>color_chooser_example.c</cite></p>
<p>Этот пример демонстрирует использование <cite>GtkColorChooserDialog</cite> для выбора цвета. Приложение имеет кнопку, по нажатию на которую открывается диалог выбора цвета. Выбранный цвет будет выведен в консоль в формате RGB.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtk/gtk.h&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Callback-функция, вызываемая при нажатии кнопки &quot;Выбрать цвет&quot;.</span>
<span class="cm"> * Открывает GtkColorChooserDialog для выбора цвета.</span>
<span class="cm"> *</span>
<span class="cm"> * @param widget Указатель на кнопку.</span>
<span class="cm"> * @param window Указатель на родительское окно.</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">on_color_button_clicked</span><span class="p">(</span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">widget</span><span class="p">,</span><span class="w"> </span><span class="n">gpointer</span><span class="w"> </span><span class="n">window</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">dialog</span><span class="p">;</span>
<span class="w">    </span><span class="n">gint</span><span class="w"> </span><span class="n">res</span><span class="p">;</span>
<span class="w">    </span><span class="n">GdkRGBA</span><span class="w"> </span><span class="n">color</span><span class="p">;</span><span class="w"> </span><span class="c1">// Структура для хранения цвета (Red, Green, Blue, Alpha).</span>

<span class="w">    </span><span class="c1">// Создаем новый GtkColorChooserDialog.</span>
<span class="w">    </span><span class="c1">// Параметры:</span>
<span class="w">    </span><span class="c1">// 1. &quot;Выбор цвета&quot;: Заголовок диалога.</span>
<span class="w">    </span><span class="c1">// 2. GTK_WINDOW(window): Родительское окно.</span>
<span class="w">    </span><span class="c1">// 3. GTK_DIALOG_MODAL: Делает диалог модальным.</span>
<span class="w">    </span><span class="c1">// 4. &quot;_Отмена&quot;: Кнопка отмены.</span>
<span class="w">    </span><span class="c1">// 5. GTK_RESPONSE_CANCEL: Ответ при нажатии кнопки отмены.</span>
<span class="w">    </span><span class="c1">// 6. &quot;_OK&quot;: Кнопка подтверждения.</span>
<span class="w">    </span><span class="c1">// 7. GTK_RESPONSE_OK: Ответ при нажатии кнопки OK.</span>
<span class="w">    </span><span class="c1">// 8. NULL: Конец списка кнопок.</span>
<span class="w">    </span><span class="n">dialog</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_color_chooser_dialog_new</span><span class="p">(</span><span class="s">&quot;Выбор цвета&quot;</span><span class="p">,</span>
<span class="w">                                          </span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// Можно установить начальный цвет диалога.</span>
<span class="w">    </span><span class="c1">// gdk_rgba_parse(&amp;color, &quot;rgb(100, 150, 200)&quot;); // Пример: парсим строку</span>
<span class="w">    </span><span class="c1">// gtk_color_chooser_set_rgba(GTK_COLOR_CHOOSER(dialog), &amp;color);</span>

<span class="w">    </span><span class="c1">// Запускаем диалог и получаем его результат.</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_dialog_run</span><span class="p">(</span><span class="n">GTK_DIALOG</span><span class="p">(</span><span class="n">dialog</span><span class="p">));</span>

<span class="w">    </span><span class="c1">// Проверяем, нажал ли пользователь &quot;OK&quot;.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">GTK_RESPONSE_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Получаем выбранный цвет.</span>
<span class="w">        </span><span class="n">gtk_color_chooser_get_rgba</span><span class="p">(</span><span class="n">GTK_COLOR_CHOOSER</span><span class="p">(</span><span class="n">dialog</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Выводим компоненты цвета в консоль.</span>
<span class="w">        </span><span class="c1">// Значения GdkRGBA находятся в диапазоне от 0.0 до 1.0.</span>
<span class="w">        </span><span class="n">g_print</span><span class="p">(</span><span class="s">&quot;Выбран цвет: R=%.2f, G=%.2f, B=%.2f, A=%.2f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">color</span><span class="p">.</span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="n">blue</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="n">alpha</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Если нужно в 0-255: (guint8)(color.red * 255), (guint8)(color.green * 255), etc.</span>
<span class="w">        </span><span class="n">g_print</span><span class="p">(</span><span class="s">&quot;В формате 0-255: R=%d, G=%d, B=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="p">(</span><span class="n">guint8</span><span class="p">)(</span><span class="n">color</span><span class="p">.</span><span class="n">red</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">guint8</span><span class="p">)(</span><span class="n">color</span><span class="p">.</span><span class="n">green</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">guint8</span><span class="p">)(</span><span class="n">color</span><span class="p">.</span><span class="n">blue</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">255</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Уничтожаем диалог.</span>
<span class="w">    </span><span class="n">gtk_widget_destroy</span><span class="p">(</span><span class="n">dialog</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Главная функция программы.</span>
<span class="cm"> * Создает основное окно с кнопкой для вызова диалога выбора цвета.</span>
<span class="cm"> *</span>
<span class="cm"> * @param argc Аргументы командной строки.</span>
<span class="cm"> * @param argv Аргументы командной строки.</span>
<span class="cm"> * @return Код завершения программы.</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">window</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="p">;</span>
<span class="w">    </span><span class="n">GtkWidget</span><span class="w"> </span><span class="o">*</span><span class="n">vbox</span><span class="p">;</span>

<span class="w">    </span><span class="n">gtk_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>

<span class="w">    </span><span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_window_new</span><span class="p">(</span><span class="n">GTK_WINDOW_TOPLEVEL</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_title</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Выбор цвета&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_default_size</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_window_set_position</span><span class="p">(</span><span class="n">GTK_WINDOW</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">GTK_WIN_POS_CENTER</span><span class="p">);</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;destroy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">gtk_main_quit</span><span class="p">),</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">    </span><span class="n">vbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_box_new</span><span class="p">(</span><span class="n">GTK_ORIENTATION_VERTICAL</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_container_set_border_width</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_container_add</span><span class="p">(</span><span class="n">GTK_CONTAINER</span><span class="p">(</span><span class="n">window</span><span class="p">),</span><span class="w"> </span><span class="n">vbox</span><span class="p">);</span>

<span class="w">    </span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtk_button_new_with_label</span><span class="p">(</span><span class="s">&quot;Выбрать цвет...&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">g_signal_connect</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;clicked&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">G_CALLBACK</span><span class="p">(</span><span class="n">on_color_button_clicked</span><span class="p">),</span><span class="w"> </span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_box_pack_start</span><span class="p">(</span><span class="n">GTK_BOX</span><span class="p">(</span><span class="n">vbox</span><span class="p">),</span><span class="w"> </span><span class="n">button</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="n">gtk_widget_show_all</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<span class="w">    </span><span class="n">gtk_main</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>—</p>
<section id="id1">
<h2><span class="section-number">11.1. </span>Компиляция и Запуск Примеров<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<p>Сохраните каждый пример кода в соответствующий файл: <cite>file_chooser_open_example.c</cite>, <cite>file_chooser_save_example.c</cite>, <cite>color_chooser_example.c</cite>.</p>
<p>### Компиляция:</p>
<p>Для сборки программ используйте следующие команды в терминале, находясь в директории с исходными файлами. Убедитесь, что у вас установлен GTK 3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Для диалога открытия файла:</span>
gcc<span class="w"> </span>file_chooser_open_example.c<span class="w"> </span>-o<span class="w"> </span>file_chooser_open_example<span class="w"> </span><span class="sb">`</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>gtk+-3.0<span class="sb">`</span>

<span class="c1"># Для диалога сохранения файла:</span>
gcc<span class="w"> </span>file_chooser_save_example.c<span class="w"> </span>-o<span class="w"> </span>file_chooser_save_example<span class="w"> </span><span class="sb">`</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>gtk+-3.0<span class="sb">`</span>

<span class="c1"># Для диалога выбора цвета:</span>
gcc<span class="w"> </span>color_chooser_example.c<span class="w"> </span>-o<span class="w"> </span>color_chooser_example<span class="w"> </span><span class="sb">`</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>gtk+-3.0<span class="sb">`</span>
</pre></div>
</div>
<p>### Запуск:</p>
<p>После успешной компиляции вы можете запустить каждое приложение:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Для диалога открытия файла:</span>
./file_chooser_open_example

<span class="c1"># Для диалога сохранения файла:</span>
./file_chooser_save_example

<span class="c1"># Для диалога выбора цвета:</span>
./color_chooser_example
</pre></div>
</div>
<p>—</p>
</section>
<section id="id2">
<h2><span class="section-number">11.2. </span>Ожидаемый Результат<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><dl class="simple">
<dt><strong>`file_chooser_open_example`</strong>:</dt><dd><ul>
<li><p>Откроется окно с кнопкой «Открыть файл…».</p></li>
<li><p>При нажатии на кнопку появится стандартное системное диалоговое окно для выбора файла (обычно с заголовком «Открыть файл»).</p></li>
<li><p>После выбора файла и нажатия «Открыть» (или аналогичной кнопки) диалог закроется, и путь к выбранному файлу будет напечатан в консоли.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>`file_chooser_save_example`</strong>:</dt><dd><ul>
<li><p>Откроется окно с кнопкой «Сохранить файл…».</p></li>
<li><p>При нажатии на кнопку появится стандартное системное диалоговое окно для сохранения файла (обычно с заголовком «Сохранить файл»). В поле имени файла будет предложено «НовыйДокумент.txt».</p></li>
<li><p>После выбора места, возможно, изменения имени файла и нажатия «Сохранить» (или аналогичной кнопки) диалог закроется, и предполагаемый путь сохранения файла будет напечатан в консоли.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>`color_chooser_example`</strong>:</dt><dd><ul>
<li><p>Откроется окно с кнопкой «Выбрать цвет…».</p></li>
<li><p>При нажатии на кнопку появится стандартное системное диалоговое окно выбора цвета (обычно с заголовком «Выбор цвета»).</p></li>
<li><p>После выбора цвета с помощью палитры или ввода значений и нажатия «OK» диалог закроется, и значения RGB (и Alpha) выбранного цвета будут напечатаны в консоли.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>—</p>
</section>
<section id="id3">
<h2><span class="section-number">11.3. </span>Дополнительные Ресурсы<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/class.FileChooserDialog.html">GtkFileChooserDialog</a></p></li>
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/class.ColorChooserDialog.html">GtkColorChooserDialog</a></p></li>
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/class.Dialog.html">GtkDialog</a> (общий базовый класс для всех диалогов)</p></li>
<li><p><a class="reference external" href="https://docs.gtk.org/gtk3/enum.ResponseType.html">GtkResponseType</a> (значения, возвращаемые диалогами)</p></li>
<li><p><a class="reference external" href="https://docs.gtk.org/gdk3/struct.RGBA.html">GdkRGBA</a> (структура для работы с цветами)</p></li>
<li><p><a class="reference external" href="https://github.com/AIDevelopersMonster/C_GUI_Handbook">C_GUI_Handbook GitHub</a></p></li>
</ul>
<p>—</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="../chapter22_dialogs/index.html" class="btn btn-neutral float-left" title="10. Глава 22: Диалоговые Окна и Окна Сообщений" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../chapter24_widget_customization/index.html" class="btn btn-neutral float-right" title="12. Глава 24: Настройка виджетов" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, KONTAKTS &amp; Garvis.</p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>