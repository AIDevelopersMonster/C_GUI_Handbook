````markdown
# Глава 4: Циклы и повторение кода

В предыдущей главе мы научились принимать решения в программе с помощью условных операторов. Теперь мы изучим, как выполнять определенные блоки кода многократно. Это называется **циклами**. Циклы позволяют автоматизировать повторяющиеся задачи, делая ваш код более эффективным и компактным.

В языке C есть три основных типа циклов:
* `while`
* `do...while`
* `for`

Мы также рассмотрим операторы `break` и `continue`, которые позволяют управлять потоком выполнения внутри циклов.

## 4.1. Цикл `while`

Цикл `while` является самым базовым типом цикла. Он повторяет блок кода **до тех пор, пока** заданное условие остается истинным. Условие проверяется **перед каждой итерацией** цикла. Если условие изначально ложно, тело цикла не выполнится ни разу.

### Синтаксис:

```c
while (условие) {
    // Код, который будет повторяться, пока условие истинно
    // Важно: внутри цикла должно быть что-то, что изменяет условие,
    // чтобы цикл мог завершиться, иначе он будет бесконечным!
}
````

### Демонстрация: `while_example.c`

Этот файл демонстрирует простой счетчик с использованием цикла `while`.

```c
// while_example.c
// Пример использования цикла while в языке C.

#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода для функции printf().

int main() {
    // Объявляем и инициализируем переменную-счетчик.
    // 'i' будет использоваться для отслеживания текущей итерации.
    int i = 0; 

    // Цикл while: тело цикла будет выполняться до тех пор, пока условие (i < 5) истинно.
    // Условие проверяется ПЕРЕД каждой новой итерацией.
    while (i < 5) {
        // Выводим текущее значение 'i' на экран, за которым следует перевод строки.
        printf("%d\n", i); 
        
        // Увеличиваем значение 'i' на 1.
        // Это КРАЙНЕ ВАЖНО для того, чтобы цикл когда-нибудь завершился.
        // Если бы мы забыли эту строку, 'i' всегда оставалось бы 0,
        // и условие (0 < 5) всегда было бы истинным, что привело бы к БЕСКОНЕЧНОМУ ЦИКЛУ.
        i++; 
    }

    // Это сообщение будет выведено после того, как цикл while полностью завершит свою работу.
    // К этому моменту 'i' будет равно 5, так как условие (i < 5) стало ложным.
    printf("Цикл while завершен. Конечное значение i: %d\n", i);

    return 0; // Возвращаем 0, что указывает на успешное завершение программы.
}
```

**Компиляция и запуск:**

```bash
gcc while_example.c -o while_example
./while_example
```

**Ожидаемый вывод:**

```
0
1
2
3
4
Цикл while завершен. Конечное значение i: 5
```

### Демонстрация: `mywhiles.c`

Ещё один простой пример цикла `while`.

```c
// mywhiles.c
#include <stdio.h>
void main (void)
{
int a = 0;
while (a < 5)
{
printf ("a is equal to %d\n", a);
a++;
}
printf ("a is equal to %d and I've finished\n", a);
}
```

**Компиляция и запуск:**

```bash
gcc mywhiles.c -o mywhiles
./mywhiles
```

**Ожидаемый вывод:**

```
a is equal to 0
a is equal to 1
a is equal to 2
a is equal to 3
a is equal to 4
a is equal to 5 and I've finished
```

## 4.2. Цикл `do...while`

Цикл `do...while` похож на `while`, но с одним ключевым отличием: он **гарантирует выполнение тела цикла хотя бы один раз**, потому что условие проверяется **после** выполнения первой итерации.

### Синтаксис:

```c
do {
    // Код, который будет повторяться
    // Этот блок выполнится хотя бы один раз
} while (условие); // Условие проверяется здесь
```

### Демонстрация: `do_while_example.c`

Этот файл показывает, как `do...while` выполняет тело цикла один раз, даже если условие изначально ложно.

```c
// do_while_example.c
// Пример использования цикла do...while в языке C.

#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода для функции printf().

int main() {
    // Объявляем и инициализируем переменную-счетчик.
    int i = 5; 

    // Цикл do...while:
    // Блок кода в секции 'do' гарантированно выполнится хотя бы один раз,
    // прежде чем условие в 'while' будет проверено.
    do {
        // Выводим текущее значение 'i' на экран.
        printf("%d\n", i); 
        
        // Увеличиваем значение 'i'.
        i++; 
    } while (i < 5); // Условие проверяется ЗДЕСЬ, после выполнения тела цикла.
                     // Если 'i' изначально было бы 5 (или больше),
                     // 'printf("%d\n", i);' и 'i++;' все равно выполнились бы один раз.

    // Это сообщение выводится после завершения цикла.
    printf("Цикл do...while завершен. Конечное значение i: %d\n", i);

    return 0; // Возвращаем 0, что указывает на успешное завершение программы.
}
```

**Компиляция и запуск:**

```bash
gcc do_while_example.c -o do_while_example
./do_while_example
```

**Ожидаемый вывод:**

```
5
Цикл do...while завершен. Конечное значение i: 6
```

### Демонстрация: `mydowhiles.c`

Ещё один простой пример цикла `do...while`.

```c
// mydowhiles.c
#include <stdio.h>
void main (void)
{
	int a = 0;
do
{
printf ("a is equal to %d\n", a);
a++;
} while (a < 5);
printf ("a is equal to %d and I've finished\n", a);
}
```

**Компиляция и запуск:**

```bash
gcc mydowhiles.c -o mydowhiles
./mydowhiles
```

**Ожидаемый вывод:**

```
a is equal to 0
a is equal to 1
a is equal to 2
a is equal to 3
a is equal to 4
a is equal to 5 and I've finished
```

## 4.3. Цикл `for`

Цикл `for` идеально подходит, когда вы заранее знаете, сколько раз нужно выполнить цикл. Он объединяет инициализацию, условие и шаг итерации в одной строке.

### Синтаксис:

```c
for (инициализация; условие; шаг) {
    // Код, который будет повторяться
}
```

  * **Инициализация:** Выполняется один раз в начале цикла. Обычно используется для объявления и инициализации переменной-счетчика.
  * **Условие:** Проверяется перед каждой итерацией. Если истинно, цикл продолжается; если ложно, цикл завершается.
  * **Шаг:** Выполняется после каждой итерации (после выполнения тела цикла). Обычно используется для изменения переменной-счетчика.

### Демонстрация: `for_example.c`

Этот файл показывает базовое использование цикла `for` для итерации определенное количество раз.

```c
// for_example.c
// Пример использования цикла for в языке C.

#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода для функции printf().

int main() {
    // Цикл for: наиболее компактная форма для повторения кода,
    // особенно когда количество итераций заранее известно.
    // Синтаксис: for (инициализация; условие; шаг)
    
    for (
        int i = 0; // 1. Инициализация: Эта часть выполняется ОДИН РАЗ в начале цикла.
                   //    Здесь мы объявляем и инициализируем переменную-счетчик 'i'.
                   
        i < 5;     // 2. Условие: Эта часть проверяется ПЕРЕД КАЖДОЙ итерацией.
                   //    Если условие истинно, тело цикла выполняется. Если ложно, цикл завершается.
                   
        i++        // 3. Шаг: Эта часть выполняется ПОСЛЕ КАЖДОЙ итерации тела цикла.
                   //    Здесь мы увеличиваем 'i' на 1.
    ) {
        // Тело цикла: Код, который будет повторяться, пока условие истинно.
        printf("%d\n", i); 
    }

    // Это сообщение выводится после того, как цикл for полностью завершит свою работу.
    printf("Цикл for завершен.\n");

    return 0; // Возвращаем 0, что указывает на успешное завершение программы.
}
```

**Компиляция и запуск:**

```bash
gcc for_example.c -o for_example
./for_example
```

**Ожидаемый вывод:**

```
0
1
2
3
4
Цикл for завершен.
```

### Демонстрация: `myfor.c`

Ещё один простой пример цикла `for`.

```c
// myfor.c
#include <stdio.h>
void main (void)
{
int a;
for (a = 0; a < 5; a++)
{
printf ("a is equal to %d\n", a);
}
printf ("a is equal to %d and I've finished\n", a);
}
```

**Компиляция и запуск:**

```bash
gcc myfor.c -o myfor
./myfor
```

**Ожидаемый вывод:**

```
a is equal to 0
a is equal to 1
a is equal to 2
a is equal to 3
a is equal to 4
a is equal to 5 and I've finished
```

### Демонстрация: `sum_numbers.c`

Практический пример использования цикла `for` для вычисления суммы чисел от 1 до 100.

```c
// sum_numbers.c
// Практический пример использования цикла for для подсчета суммы чисел.

#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода для функции printf().

int main() {
    // Объявляем и инициализируем переменную 'sum' нулем.
    // В этой переменной будет накапливаться сумма чисел.
    int sum = 0; 

    // Используем цикл for для итерации от 1 до 100 включительно.
    for (
        int i = 1;   // Инициализация: начинаем счетчик 'i' с 1.
        i <= 100;    // Условие: продолжаем цикл, пока 'i' меньше или равно 100.
        i++          // Шаг: увеличиваем 'i' на 1 после каждой итерации.
    ) {
        // Тело цикла:
        // Добавляем текущее значение 'i' к переменной 'sum'.
        // Это сокращенная запись для 'sum = sum + i;'.
        sum += i; 
    }

    // После того, как цикл завершится (когда 'i' станет 101),
    // выводим итоговую сумму на экран.
    printf("Сумма чисел от 1 до 100: %d\n", sum);

    return 0; // Возвращаем 0, что указывает на успешное завершение программы.
}
```

**Компиляция и запуск:**

```bash
gcc sum_numbers.c -o sum_numbers
./sum_numbers
```

**Ожидаемый вывод:**

```
Сумма чисел от 1 до 100: 5050
```

## 4.4. Управление циклами: `break` и `continue`

Иногда вам может понадобиться изменить нормальный поток выполнения цикла. Для этого используются операторы `break` и `continue`.

  * **`break;`**: Немедленно и полностью **выходит из ближайшего объемлющего цикла**. Выполнение программы продолжается с оператора, следующего за циклом.
  * **`continue;`**: Пропускает оставшуюся часть **текущей итерации** цикла и переходит к следующей итерации (проверяя условие цикла заново).

### Демонстрация: `break_continue_example.c`

Этот файл иллюстрирует работу `break` и `continue` внутри цикла `for`.

```c
// break_continue_example.c
// Примеры использования операторов break и continue в цикле for в языке C.

#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода для функции printf().

int main() {
    printf("Демонстрация break и continue:\n");

    for (int i = 0; i < 5; i++) {
        // Проверяем условие для оператора 'continue'.
        // Если 'i' равно 2, то 'continue' будет выполнен.
        if (i == 2) {
            printf("  -- Обнаружено i = 2. Выполняем 'continue'.\n");
            // 'continue' немедленно пропускает оставшийся код в текущей итерации
            // и переходит к следующей итерации цикла (увеличивая 'i' и проверяя условие).
            continue; 
        }

        // Этот printf() будет пропущен, когда i равно 2 из-за 'continue'.
        printf("  Выводим: %d\n", i); 

        // Проверяем условие для оператора 'break'.
        // Если 'i' равно 4, то 'break' будет выполнен.
        if (i == 4) {
            printf("  -- Обнаружено i = 4. Выполняем 'break'.\n");
            // 'break' немедленно и полностью выходит из ближайшего объемлющего цикла.
            // Никакой последующий код в цикле (даже в этой итерации) не будет выполнен,
            // и цикл больше не будет повторяться.
            break; 
        }
    }

    printf("Цикл завершен (или был прерван оператором break).\n");
    return 0;
}
```

**Компиляция и запуск:**

```bash
gcc break_continue_example.c -o break_continue_example
./break_continue_example
```

**Ожидаемый вывод:**

```
Демонстрация break и continue:
  Выводим: 0
  Выводим: 1
  -- Обнаружено i = 2. Выполняем 'continue'.
  Выводим: 3
  -- Обнаружено i = 4. Выполняем 'break'.
Цикл завершен (или был прерван оператором break).
```

### Демонстрация: `myloop.c`

Пример бесконечного цикла `while(1)` с использованием `break` для выхода.

```c
// myloop.c
#include <stdio.h>
void main (void)
{
int a = 0;
while (1) // Условие '1' (любое ненулевое значение) всегда истинно, создавая бесконечный цикл.
{
printf ("a is equal to %d\n", a);
a++;
if (a == 5) // Условие для выхода из бесконечного цикла.
{
break; // Оператор break прерывает выполнение цикла.
}
}
printf ("a is equal to %d and I've finished\n", a);
}
```

**Компиляция и запуск:**

```bash
gcc myloop.c -o myloop
./myloop
```

**Ожидаемый вывод:**

```
a is equal to 0
a is equal to 1
a is equal to 2
a is equal to 3
a is equal to 4
a is equal to 5 and I've finished
```

## Как скомпилировать и запустить файлы (`.c`)

Для компиляции и запуска этих программ на Raspberry Pi Zero 2 W (или любой другой системе с установленным GCC) выполните следующие шаги в терминале:

1.  **Откройте терминал:** Перейдите в каталог, где сохранены ваши `.c` файлы.
2.  **Компиляция:** Используйте компилятор `gcc`.
    Например, для `while_example.c`:
    ```bash
    gcc while_example.c -o while_example
    ```
      * `gcc`: Исполняемый файл компилятора GNU C.
      * `while_example.c`: Исходный файл, который вы хотите скомпилировать.
      * `-o while_example`: Опция `-o` указывает имя выходного исполняемого файла (в данном случае `while_example`). Если эту опцию опустить, исполняемый файл по умолчанию будет называться `a.out`.
3.  **Запуск:** Запустите скомпилированный исполняемый файл.
    ```bash
    ./while_example
    ```
      * `./`: Указывает операционной системе искать исполняемый файл в текущем каталоге.

Повторите эти шаги для каждого файла `.c`, чтобы скомпилировать и запустить их.

-----

**Краткий конспект Главы 4 (для меня):**

  * **Тема:** Циклы и повторение кода.
  * **Ключевые понятия:**
      * Цикл `while`: условие проверяется до каждой итерации, может не выполниться ни разу.
      * Цикл `do...while`: тело цикла выполняется хотя бы один раз, условие проверяется после первой итерации.
      * Цикл `for`: компактный цикл для известного числа итераций (инициализация; условие; шаг).
      * Оператор `break;`: немедленный выход из цикла.
      * Оператор `continue;`: пропуск оставшейся части текущей итерации, переход к следующей.
      * Создание бесконечного цикла (`while(1)`) и выход из него с помощью `break`.
  * **Демонстрационные файлы:** `while_example.c`, `mywhiles.c`, `do_while_example.c`, `mydowhiles.c`, `for_example.c`, `myfor.c`, `sum_numbers.c`, `break_continue_example.c`, `myloop.c`.
  * **Инструкции:** Компиляция (`gcc`) и запуск (`./`).

<!-- end list -->

```
```