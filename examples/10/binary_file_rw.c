#include <stdio.h> // Подключаем стандартную библиотеку ввода/вывода.

int main() {
    // --- Часть 1: Запись в бинарный файл ---
    int numbers[] = {1, 2, 3, 4, 5}; // Объявляем массив целых чисел для записи.

    // Открываем файл "numbers.bin" в режиме бинарной записи.
    // "wb" - "write binary" (запись в бинарном режиме).
    // Важно использовать 'b' для бинарных файлов, особенно в некоторых операционных системах,
    // чтобы избежать автоматической конвертации символов новой строки (например, '\n' в '\r\n').
    FILE *fp = fopen("numbers.bin", "wb");

    // Проверяем, успешно ли открыт файл.
    if (fp) { // Упрощенная проверка: NULL интерпретируется как false, не-NULL как true.
        // Записываем массив чисел в файл.
        // fwrite(указатель_на_данные, размер_одного_элемента, количество_элементов, указатель_на_файл)
        // - 'numbers': указатель на начало данных, которые нужно записать.
        // - 'sizeof(int)': размер одного элемента (целого числа) в байтах.
        // - '5': количество элементов, которые мы хотим записать из массива 'numbers'.
        // - 'fp': указатель на файл.
        // fwrite возвращает количество успешно записанных элементов.
        fwrite(numbers, sizeof(int), 5, fp);
        fclose(fp); // Закрываем файл после записи.
        printf("Массив чисел успешно записан в numbers.bin\n");
    } else {
        printf("Ошибка: Не удалось открыть файл 'numbers.bin' для записи.\n");
        return 1; // Код ошибки.
    }

    // --- Часть 2: Чтение из бинарного файла ---
    int read_numbers[5]; // Объявляем массив для хранения чисел, считанных из файла.
                         // Размер должен быть достаточным для хранения всех ожидаемых данных.

    // Открываем тот же файл "numbers.bin" в режиме бинарного чтения.
    // "rb" - "read binary" (чтение в бинарном режиме).
    fp = fopen("numbers.bin", "rb");

    // Проверяем, успешно ли открыт файл для чтения.
    if (fp) {
        // Считываем данные из файла в массив read_numbers.
        // fread(указатель_на_буфер, размер_одного_элемента, количество_элементов, указатель_на_файл)
        // - 'read_numbers': указатель на буфер, куда будут помещены считанные данные.
        // - 'sizeof(int)': размер одного элемента.
        // - '5': максимальное количество элементов, которые мы хотим считать.
        // - 'fp': указатель на файл.
        // fread возвращает количество успешно считанных элементов.
        fread(read_numbers, sizeof(int), 5, fp);
        fclose(fp); // Закрываем файл после чтения.

        printf("Числа, считанные из 'numbers.bin': ");
        // Выводим считанные числа на консоль, чтобы убедиться, что они были прочитаны корректно.
        for (int i = 0; i < 5; i++) {
            printf("%d ", read_numbers[i]);
        }
        printf("\n");
    } else {
        printf("Ошибка: Не удалось открыть файл 'numbers.bin' для чтения.\n");
        return 1; // Код ошибки.
    }

    return 0; // Успешное завершение программы.
}