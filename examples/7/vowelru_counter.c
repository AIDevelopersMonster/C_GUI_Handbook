/*
 * Проблема: Почему предыдущая версия кода не работала с русскими символами?
 *
 * Предупреждения компилятора, такие как [-Wmultichar], возникали из-за того,
 * что русские символы в кодировке UTF-8 занимают более одного байта.
 * В языке C тип `char` обычно предназначен для хранения однобайтовых символов (8 бит).
 *
 * Когда вы пытались сравнить `c == 'Я'`, компилятор видел 'Я' как многосимвольную константу,
 * так как для представления одного русского символа требуется несколько байтов в UTF-8.
 * Это приводило к неопределенному поведению и некорректным результатам при подсчете.
 *
 * Решение: Использование широких символов (wchar_t)
 *
 * Для корректной работы с многобайтовыми символами, такими как русские буквы,
 * необходимо использовать тип `wchar_t` (широкий символ).
 * `wchar_t` гарантированно может хранить все символы из набора символов локали.
 *
 * Для ввода/вывода широких символов используются функции, начинающиеся с 'w' (например, `wprintf`, `fgetws`).
 * Для установки правильной локали, которая позволит программе интерпретировать
 * многобайтовые символы, используется функция `setlocale(LC_ALL, "")`.
 * Это позволяет программе корректно обрабатывать локализованный текст,
 * включая сравнение символов и преобразование регистра (`towlower`).
 */

#include <stdio.h>   // Для стандартных функций ввода/вывода (необходим для fgetws, хоть и wprintf более специфичен)
#include <wchar.h>   // Для работы с широкими символами (wchar_t, wprintf, fgetws)
#include <wctype.h>  // Для функций работы с широкими символами (towlower)
#include <locale.h>  // Для установки локали (setlocale)

int main() {
    // Устанавливаем локаль для корректной работы с русским текстом.
    // Пустая строка "" означает использование локали по умолчанию из окружения.
    setlocale(LC_ALL, "");

    wchar_t str[100]; // Объявляем массив для хранения широких символов
    int count = 0;    // Счетчик гласных

    // Выводим запрос пользователю, используя wprintf для широких символов
    wprintf(L"Введите строку: ");
    // Считываем строку широких символов с помощью fgetws
    // sizeof(str) / sizeof(wchar_t) рассчитывает максимальное количество wchar_t,
    // которое может поместиться в буфер str.
    fgetws(str, sizeof(str) / sizeof(wchar_t), stdin);

    // Перебираем каждый символ в строке до нулевого терминатора L'\0'
    for (int i = 0; str[i] != L'\0'; i++) {
        // Приводим текущий широкий символ к нижнему регистру с помощью towlower.
        // Это гарантирует, что мы подсчитаем как строчные, так и заглавные гласные.
        wchar_t c = towlower(str[i]);

        // Проверяем, является ли текущий символ одной из русских гласных букв.
        // Важно использовать префикс L перед символом для обозначения широких символов.
        if (c == L'а' || c == L'е' || c == L'ё' || c == L'и' || c == L'о' ||
            c == L'у' || c == L'ы' || c == L'э' || c == L'ю' || c == L'я') {
            count++; // Если гласная, увеличиваем счетчик
        }
    }

    // Выводим окончательный результат, используя wprintf
    wprintf(L"Количество русских гласных: %d\n", count);
    return 0; // Возвращаем 0, сигнализируя об успешном завершении программы
}