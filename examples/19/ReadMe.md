----------

# Примеры к Главе 19: Выпадающие Списки (ComboBox) и Модели Данных (ListStore)

В этой главе мы глубоко погружаемся в работу с интерактивными элементами выбора данных в GTK: **`GtkComboBox`** (выпадающие списки) и **`GtkListStore`** (модели данных). Эти компоненты критически важны для приложений, где пользователю нужно выбрать один элемент из предопределенного списка, будь то список настроек, категорий или других значений.

Мы рассмотрим два основных сценария:

1.  **`GtkComboBoxText`**: Упрощённый выпадающий список для простых текстовых значений.
    
2.  **`GtkComboBox` с `GtkListStore`**: Более мощный и гибкий подход для работы со сложными данными, где каждый элемент списка может иметь несколько ассоциированных значений (например, текст и ID).
    

----------

## Исходные файлы в этой главе

-   `combo_simple_example.c`: Демонстрирует базовое использование **`GtkComboBoxText`** для создания выпадающего списка с простыми строками.
    
-   `combo_liststore_example.c`: Показывает, как использовать **`GtkComboBox`** в связке с **`GtkListStore`** (как моделью данных) и **`GtkCellRendererText`** (для отображения данных) для более сложных сценариев.
    

----------

## `combo_simple_example.c`

Этот пример создаёт простое окно с выпадающим списком, содержащим названия языков программирования. При выборе элемента, его название будет выведено в консоль.

### Как скомпилировать и запустить

1.  **Сохраните** код из `combo_simple_example.c` в файл с таким же названием.
    
2.  **Откройте терминал** и перейдите в директорию, где вы сохранили файл.
    
3.  **Скомпилируйте** программу:
    
    Bash
    
    ```
    gcc combo_simple_example.c -o combo_simple_example `pkg-config --cflags --libs gtk+-3.0`
    
    ```
    
    -   `gcc combo_simple_example.c -o combo_simple_example`: Указывает компилятору GCC взять исходный файл `combo_simple_example.c` и создать исполняемый файл с именем `combo_simple_example`.
        
    -   `` `pkg-config --cflags --libs gtk+-3.0` ``: Эта команда автоматически предоставляет GCC все необходимые пути к заголовочным файлам (`--cflags`) и библиотекам (`--libs`), которые требуются для успешной компиляции GTK3-приложения.
        
4.  **Запустите** скомпилированную программу:
    
    Bash
    
    ```
    ./combo_simple_example
    
    ```
    

### Ожидаемый результат

При запуске программы вы увидите небольшое окно с заголовком **"Пример GtkComboBoxText"**. В центре окна будет расположен выпадающий список, содержащий элементы: **"C"**, **"Python"**, **"Rust"**, **"Java"**, **"Go"**.

По умолчанию будет выбран первый элемент: **"C"**.

При выборе любого другого элемента из списка (например, **"Python"**), в терминал, из которого вы запустили программу, будет выведено сообщение:

```
Вы выбрали: Python

```

----------

## `combo_liststore_example.c`

Этот пример демонстрирует более продвинутое использование `GtkComboBox` с моделью данных `GtkListStore`. Каждый элемент в списке теперь содержит не только отображаемое имя, но и ассоциированный числовой ID.

### Как скомпилировать и запустить

1.  **Сохраните** код из `combo_liststore_example.c` в файл с таким же названием.
    
2.  **Откройте терминал** и перейдите в директорию, где вы сохранили файл.
    
3.  **Скомпилируйте** программу:
    
    Bash
    
    ```
    gcc combo_liststore_example.c -o combo_liststore_example `pkg-config --cflags --libs gtk+-3.0`
    
    ```
    
    -   Процесс компиляции аналогичен предыдущему примеру, но для другого исходного файла.
        
4.  **Запустите** скомпилированную программу:
    
    Bash
    
    ```
    ./combo_liststore_example
    
    ```
    

### Ожидаемый результат

При запуске программы вы увидите окно с заголовком **"Пример ComboBox с ListStore"**. В центре окна будет выпадающий список, содержащий элементы: **"Опция А"**, **"Опция Б"**, **"Опция В"**, **"Опция Г"**.

По умолчанию будет выбрана **"Опция Б"** (второй элемент).

При выборе любого другого элемента из списка (например, **"Опция В"**), в терминал будет выведено сообщение, включающее как отображаемый текст, так и его числовой идентификатор из `GtkListStore`:

```
Вы выбрали: Опция В (ID: 103)

```

----------

### Дополнительные ресурсы

-   [Официальная документация GtkComboBox](https://docs.gtk.org/gtk3/class.ComboBox.html)
    
-   [Официальная документация GtkListStore](https://docs.gtk.org/gtk3/class.ListStore.html)
    
-   [Официальная документация GtkCellRendererText](https://docs.gtk.org/gtk3/class.CellRendererText.html)
    
-   [Официальная документация GtkTreeModel](https://docs.gtk.org/gtk3/iface.TreeModel.html) (интерфейс, который реализует `GtkListStore`)
    
-   [Главная страница руководства C GUI Handbook](https://github.com/AIDevelopersMonster/C_GUI_Handbook)
    

----------